<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=0.7">
	<link rel="stylesheet" type="text/css" href="style.css"/>
	<script type="text/javascript" src="vue.js"></script>
	<title>Tablå</title>
	<script type="text/x-template" id="link-template">
		  <a
		    v-bind:href="href"
		    v-bind:class="{ active: isActive }"
		    v-on:click="go"
		  >
		    <slot></slot>
		  </a>
	</script>
	<script type="text/x-template" id="sessiondetail-template">
	<div class="overlay">
	<div class="header" onclick="window.history.back();"><h2><span class="title"><span class="id">{{ session.number }}:</span> {{ session.title }}</span><span class="close"> ╳ </span></h2></div>
    <div class="content">
		<div class="body">
			<p>{{ session.kind }}</p>
			<p>Room: {{ session.room }}, {{ session.startTime | formatTime }} - {{ session.endTime | formatTime }} ({{ session.duration }} minutes)</p>
			<p>Chair: {{ session.chair }}</p>
			<p><span v-html="session.description"></span></p>
			<ul class="talks">
				<li v-for="talk in talks">
					<talk v-bind:talk="talk"></talk>
				</li>
			</ul>
		</div>
    </div>
  </div>
	</script>
	<script type="text/x-template" id="talk-template">
		<div class="talk">
			<div class="timeline">
				<div class="line"/>
				<div class="time">{{ talk.startTime | formatTime }}</div>
				<div class="line"/>
			</div>
			<span class="info">
				<div class="title" v-on:click='showDetail = !showDetail'>
					{{ talk.title }} 
				</div> 
				<div class="presenter" v-on:click='showDetail = !showDetail'>{{ talk.presenter}}</div>
				<div v-show="showDetail" class="presenter">Authors: {{ talk.authors }} </div>
				<div v-show="showDetail" class="abstract" v-html="talk.abstract"></div>
			</span>
		</div>
	</script>
</head>
<body>
	<div id="app">
		<header>
			<span class="conference">RailNorrköping</span>
			<input type="text" class="search" v-model="search" placeholder="Search title, presenter, room, Session ID..."/>
			<div v-show="search != ''">{{ filteredSessions | count }} sessions found</div>
		</header>

		<section id="main">
			<div v-for="timeslot in filteredSessionsByTimeslot">
				<div v-if="timeslot.days != null" v-bind:id = "filterDay == '' ? '/' + timeslot.day : null" class="days">
					<vlink v-for="d in timeslot.days" v-bind:href="'#/' + d" v-bind:class="{current: d == timeslot.day}">{{ d }}</vlink>
				</div>
				<h2 class="timeslot">{{ timeslot.title }}</h2>
				<div class="sessions">
					<div class="session" v-for="session in timeslot.sessions">
						<div class="location">{{ session.room }}</div>
						<vlink v-bind:href="'#/session/' + session.number"><div class="title"><span class="id">{{ session.number }}:</span> {{ session.title }}</div></a>

						<div class="info">
							<p v-if="(search).length >= 2" v-for="talk in filteredTalks[session.number]">
								{{ talk.title }} ({{ talk.presenter}})
							</p>
							<span v-if="(search).length == 0" v-for="(talk, index) in filteredTalks[session.number]">
								{{ talk.presenter }}<span v-if="index+1 < filteredTalks[session.number].length">, </span>
							</span>
							<!--<span v-if="(search).length == 0" v-for="(talk, index) in filteredTalks[session.number]">
								<span v-for="keyword in talk.keywords">
									{{ keyword }}
								</span>
								<br/>
							</span>-->
						</div>
					</div>
				</div>
			</div>
		</section>
		<footer>
			
		</footer>
	
		<sessiondetail v-if="sessionDetail != null" v-bind:session="sessionDetail" v-bind:talks="talksBySession[sessionDetail.number]"/>
	</div>
	<footer>
		<a href="https://github.com/bitsteller/tabla">Tablå</a>
	</footer>
</body>
<script type="text/javascript" src="script/main.js"></script>
</html>
